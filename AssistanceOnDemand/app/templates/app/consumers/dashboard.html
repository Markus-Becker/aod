{% extends "app/base.html" %}
    {% load i18n %}
    {% load l10n %}

    {% block title %} 
    {% trans 'AoD | Welcome' %} {% if username %} {{ username }} {% else %} user {% endif %} 
    {% endblock title %}

    {% block navbar %}
        {% include "app/navbar-users.html" %}
    {% endblock navbar %}

    {% load staticfiles %}

    {% block extraCss %}
        <link rel="stylesheet" type="text/css" href="{% static 'app/content/jquery-ui/1.11.3/jquery-ui.min.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'app/content/jquery-tree/jquery.tree.min.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'app/content/sweetalert/sweetalert.css' %}" />
    {% endblock extraCss %}

    {% block content %}
    <div class="container body-content" style="margin-top: 50px; padding-bottom:2em">
    
        {% block breadcrumb %}
        <ol class="breadcrumb">
            <li class="active"><i class="fa fa-home"></i> {% trans 'Home' %}</li>
        </ol>
        {% endblock breadcrumb %}

        <section class="row">
            
            {% block searchModule %}
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                    <section id="search_services_module" class="panel" style="padding-left: 5px; padding-right: 5px">
                            <form action="{% url 'search_services' %}" method="post" id="service-search-form" name="service-search-form">
                                <h4 class="text-center bg-primary"  role="heading">
                                    <span class="fa fa-search fa-lg text-muted"></span> {% trans 'Find your services' %}
                                </h4>
                                <hr>
                                <!--form inputs -->

                                <fieldset>
                                    <!--categories list-->
                                    <div class="form-group" id="categories-panel">
                                        <div class="panel-group" id="categories-id" role="tablist" aria-multiselectable="true" >
                                            <div class="panel  panel-custom-success">
                                                <div class="panel-heading" role="tab" id="categories-title">
                                                      <h4 class="panel-title" title="Categories">
                                                            <a data-toggle="collapse" data-parent="#categories-id" href="#categories-list" aria-expanded="true" aria-controls="categories-list">
                                                                {% trans 'Categories' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                            
                                                <div id="categories-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="categories-title">
                                                    <div class="panel-body" style="background-color:whitesmoke">
    
                                                    <!--append categories tree-->
                                                    <div id="tree" data-resource="{% url 'private_api:categories_tree' %}" style="margin-left: -40px"></div>
                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--Companies-->
                                    <div class="form-group" id="companies-panel">
                                        <div class="panel-group" id="companies-id" role="tablist" aria-multiselectable="true" >
                                            <div class="panel panel-custom-success" >
                                                <div class="panel-heading" role="tab" id="companies-title">
                                                      <h4 class="panel-title" title="Companies/Providers">
                                                            <a data-toggle="collapse" data-parent="#companies-id" href="#companies-list" aria-expanded="true" aria-controls="companies-list">
                                                                {% trans 'Service providers' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="companies-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="companies-title">
                                                    <div class="panel-body" style="background-color:whitesmoke">
                                                        {% if providers %}
                                                            {% for provider in providers %}
                                                            <div class="checkbox">
                                                                <input type="checkbox" id="provider-{{ provider.id }}" name="provider-{{ provider.id }}" data-id="{{ provider.id }}" data-name="provider-{{ provider.id }}"/> 
                                                                <label for="provider-{{ provider.id }}" style="line-height:initial">{{ provider.name }}</label>
                                                                <span class="label label-success pull-right">{{ provider.servNo }} </span>
                                                            </div>
                                                            {% endfor %}
                                                        {% endif %}

                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--types-of-services-->
                                    <div class="form-group" id="service-types-panel">
                                        <div class="panel-group" id="service-types-id" role="tablist" aria-multiselectable="true" style="border-radius:0px!important">
                                            <div class="panel panel-custom-success">
                                                <div class="panel-heading" role="tab" id="service-types-title">
                                                      <h4 class="panel-title" title="Types of services">
                                                            <a data-toggle="collapse" data-parent="#service-types-id" href="#service-types-list" aria-expanded="true" aria-controls="service-types-list">
                                                                {% trans 'Type' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="service-types-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="service-types-title">
                                                    <div class="panel-body " style="background-color:whitesmoke">
                                                        <div class="checkbox">
                                                            <input type="checkbox" id="human_service_type" name="human_service_type" data-id="h" /> 
                                                            <label for="human_service_type" style="line-height:initial">{% trans 'Human' %}</label>
                                                            <span class="label label-success pull-right" >{% if servicesTypes %} {{ servicesTypes.human }} {% endif %}</span>
                                                        </div>       
                                                        <div class="checkbox">
                                                            <input type="checkbox" id="machine_service_type" name="machine_service_type" data-id="m"/> 
                                                            <label for="machine_service_type" style="line-height:initial">{% trans 'Machine' %}</label>
                                                            <span class="label label-success pull-right" >{% if servicesTypes %} {{ servicesTypes.machine }} {% endif %}</span>
                                                        </div>     
                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--payment policy-->
                                    <div class="form-group" id="charging-model-panel">
                                        <div class="panel-group" id="charging-model-id" role="tablist" aria-multiselectable="true">
                                            <div class="panel panel-custom-success">
                                                <div class="panel-heading" role="tab" id="charging-model-title">
                                                      <h4 class="panel-title" title="Payment policies">
                                                            <a data-toggle="collapse" data-parent="#charging-model-id" href="#charging-model-list" aria-expanded="true" aria-controls="charging-model-list">
                                                                {% trans 'Payment policies' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="charging-model-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="charging-model-title">
                                                    <div class="panel-body " style="background-color:whitesmoke">
                                                    <!-- 2015.04.21 it works. -->
                                                    {#% if chargingModels %#}
                                                        {#% for model in chargingModels %#}
                                                            <!--
                                                            <div class="checkbox">
                                                                <label for="charging-model-{#{ model.id }#}">
                                                                    <input type="checkbox" id="charging-model-{#{ model.id }#}" name="charging-model-{#{ model.id }#}" data-id="{#{ model.id }#}" data-name="charging-model-{#{ model.id }#}"/> 
                                                                    <span>{#{ model.name }#}</span>
                                                                    <span class="label label-success pull-right">{#{ model.servNo }#}</span>
                                                                </label>
                                                            </div> 
                                                            -->
                                                        {#% endfor %#}
                                                    {#% endif %#}
                                                    <!-- 2015.04.21 -->


                                                    {% if chargingModels %}
                                                        {% for model in chargingModels %}
                                                            {% if model.name == "Free" %}
                                                            <div class="checkbox">
                                                                <input type="checkbox" id="charging-model-{{ model.id }}" name="charging-model-{{ model.id }}" data-id="{{ model.id }}" data-name="charging-model-{{ model.id }}"/> 
                                                                <label for="charging-model-{{ model.id }}" style="line-height:initial">{{ model.name }}</label>
                                                            </div>
                                                            <div class="checkbox">
                                                                <input type="checkbox" id="charging-model-0" name="charging-model-paid" data-id="0" data-name="charging-model-paid"/> 
                                                                <label for="charging-model-0" style="line-height:initial">Paid</label>
                                                            </div>
                                                            {% endif %}
                                                        {% endfor %}
                                                    {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--price-->
                                    <div class="form-group" id="price-panel">
                                        <div class="panel-group" id="price-id" role="tablist">
                                            <div class="panel panel-custom-success">
                                                <div class="panel-heading" role="tab" id="price-title">
                                                      <h4 class="panel-title" title="Price">
                                                            <a data-toggle="collapse" data-parent="#price-id" href="#price-list" aria-expanded="true" aria-controls="price-list">
                                                                {% trans 'Price' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="price-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="price-title">
                                                    <div class="panel-body" style="background-color:whitesmoke">
                                                        
                                                        <div class="price input-group margin-bottom-5">
                                                            <span for="low_price" class="input-group-addon">From</span>
                                                            <input type="number" step="0.01" placeholder="min value" min="0" id="low_price" data-parent=".price" data-min="0.00" data-max="9999999.00" max="9999999.00" class="form-control" style="background: whitesmoke;">
                                                            <span class="input-group-addon">&#8364;</span>                                   
                                                        </div>

                                                        <div class="price input-group">
                                                            <span for="high_price" class="input-group-addon">Up to</span>
                                                            <input type="number" step="0.01" placeholder="max value" min="0" id="high_price" max="9999999.00" data-parent=".price" data-min="0.00" data-max="9999999.00" class="form-control" style="background: whitesmoke">
                                                            <span class="input-group-addon">&#8364;</span>                                   
                                                        </div> 
                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--QoS-->
                                    <div class="form-group" id="quality-of-service-panel">
                                        <div class="panel-group" id="quality-of-service-id" role="tablist" aria-multiselectable="true">
                                            <div class="panel panel-custom-success">
                                                <div class="panel-heading" role="tab" id="quality-of-service-title">
                                                      <h4 class="panel-title" title="Searches based on Quality of Services measured by serviced users from zero (worst) to five (best).">
                                                            <a data-toggle="collapse" data-parent="#quality-of-service-id" href="#quality-of-service-list" aria-expanded="true" aria-controls="quality-of-service-list">
                                                                {% trans 'Quality of Service' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="quality-of-service-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="quality-of-service-title">
                                                    <div class="panel-body " style="background-color:whitesmoke;">    
                                                        <div id="qos">
                                                            <div class="input-group margin-bottom-5" style="max-width: 90%">
                                                                <span class="input-group-addon">
                                                                    <span class="fa fa-star-o star-colorize-yellow" role="img" alt="Minimum value of quality of service (rating)"></span>
                                                                </span>
                                                                <input type="number" step="0.1" placeholder="minimum rating" min="0" max="5" id="low_QoS" data-parent="#qos" data-min="0.00" data-max="5.00" class="form-control" style="background: whitesmoke">
                                                            </div>
                                                            <div class="input-group" style="max-width: 90%">
                                                                <span class="input-group-addon">
                                                                    <span class="fa fa-star star-colorize-yellow" role="img" alt="Maximum value of quality of service (rating)"></span>
                                                                </span>
                                                                <input type="number" step="0.1" placeholder="maximum rating" min="0" max="5" id="high_QoS" data-parent="#qos" data-min="0.00" data-max="5.00" class="form-control" style="background: whitesmoke">
                                                            </div>
                                                        </div> 
                                                          <div>
                                                            <span class="fa fa-info-circle text-primary"></span> 
                                                            <span style="font-size: 12px">{% trans 'Set the QoS range of your interest' %}</span>
                                                        </div>
                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--distance-->
                                    <div class="form-group" id="location-panel">
                                        <div class="panel-group" id="location-id" role="tablist">
                                            <div class="panel panel-custom-success">
                                                <div class="panel-heading" role="tab" id="location-title">
                                                      <h4 class="panel-title" title="Searches for services offered around your current location">
                                                            <a data-toggle="collapse" data-parent="#location-id" href="#location-list" aria-expanded="true" aria-controls="location-list">
                                                                {% trans 'Your current location' %}
                                                                <i class="fa fa-angle-double-down pull-right"></i>
                                                            </a>
                                                      </h4>
                                                </div>
                                                <div id="location-list" class="panel-collapse collapse" role="tabpanel" aria-labelledby="location-title">
                                                    <div class="panel-body" style="background-color:whitesmoke">
                                                        <div class="location input-group" >
                                                            <input type="number" step="0.01" min="0.00" maxlength="20" class="form-control" placeholder="max distance"> 
                                                            <span class="input-group-addon">km</span>
                                                        </div>
                                                        <div>
                                                            <span class="fa fa-info-circle text-primary"></span> 
                                                            <span style="font-size: 12px">{% trans 'Scan for services within the distance of your interest from your location' %}</span>
                                                        </div>
                                                     </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                
                                    <hr class="service-hr">
                                    <div class="col-xs-6 col-lg-6 col-sm-6 col-md-6">
                                        <button type="reset" class="btn btn-default btn-block">{% trans 'Reset' %}</button>
                                    </div>
                                     <div class="col-xs-6 col-lg-6 col-sm-6 col-md-6">
                                        <button type="button" id="search-btn" class="btn btn-success btn-block">{% trans 'Search' %}</button>
                                    </div>
                                </fieldset>
                            </form>
                        </section>
                    </div>
            {% endblock searchModule %}
            
            {% block contentTopBanner %}
                <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9" style="background-color:whitesmoke; padding-top:15px; border-radius: 4px">
                    <div class="row">
                        <!-- service per page dropdown -->
                        <div class=" col-xs-5 col-sm-4 form-group">
                            <div id="content-top-banner" style="margin-bottom: 1em;">
                                <label for="items-per-page-id" class="pull-left" style="padding-right:3px">{% trans 'Services per page'%} </label>
                                <div role="menu" title="Number of services per page">
                                    <select id="items-per-page-id" name="items-per-page-id" class="form-control" style="max-width:80px!important">
                                        <option value="15" >15</option>
                                        <option value="30" selected="selected">30</option>
                                        <option value="45" >45</option>
                                        <option value="60" >60</option>
                                    </select>
                                </div>
                            </div>          
                        </div>  
                        <!-- Sort by dropdown -->
                        <div class=" col-xs-4 col-sm-4 form-group">
                            <label for="sortby" class="pull-left" style="padding-right:3px">{% trans 'Sort by' %} </label>
                            <div role="menu" class="my-sort-choice" title="Sort the list of registered services" aria-label="{% trans 'Sort the list of registered services' %}">
                                <select name="sortby" id="sortby" data-sort="asc_title" class="form-control" style="max-width:200px!important">
                                    <option value="asc_price" > {% trans 'Price: Low to High' %}</option>
                                    <option value="desc_price"> {% trans 'Price: High to Low' %}</option>
                                    <option value="asc_title" selected>{% trans 'Title: A to Z' %}</option>
                                    <option value="desc_title" >{% trans 'Title: Z to A' %}</option>
                                    <option value="rating" disabled>{% trans 'Rating: High to Low' %}</option>
                                    <option value="most_popular" disabled>{% trans 'Most popular' %}</option>
                                </select>
                            </div>
                        </div>
                        <!-- view choices -->
                        <div class=" col-xs-3 col-sm-4">
                            <div class="btn-group pull-right services-view" role="group" data-view="m" aria-label="Service results presentation" style="margin-left:15px">
                                <a id="multidata_view" class="btn btn-md btn-default" data-view="m" href="#"><i class="fa fa-th-large"></i></a>
                                <a id="list_view" class="btn btn-md btn-default" data-view="l" href="#"><i class="fa fa-th-list"></i></a>
                            </div>
                            <label class="pull-right">{% trans 'View' %}</label>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div id="services-result">
                            {% include 'app/consumers/services/services.html' %}
                        </div>
                    </div>
                </div>
            {% endblock contentTopBanner %}

        </section>
    </div> 
    {% endblock content %}


    {% block scripts %}
        
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
        <script type="text/javascript" src="{% static 'app/scripts/p4a-lib/cookies.js' %}"></script>
        <script type="text/javascript" src="{% static 'app/scripts/p4a-lib/ajax-load.js' %}"></script>
        <script type="text/javascript" src="{% static 'app/scripts/jquery-ui/1.11.3/jquery-ui.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'app/scripts/jquery-tree/jquery.tree.min.js' %}"></script>
        <script type="text/javascript"> var limit=15;//"{{limit}}";  var sortby = -1;//"{{ sortby }}"; </script>
        <script type="text/javascript" src="{% static 'app/scripts/p4a-lib/consumers/dashboard.js' %}"></script>
        <script type="text/javascript" src="{% static 'app/scripts/sweetalert/sweetalert.min.js' %}"></script>
    {% endblock scripts %}